# SynOS v1.0 Deployment Guide
**Execute these commands to deploy everything and finish v1.0**

---

## ðŸš€ Quick Start (5 Minutes to Deploy Everything)

### Step 1: Run Deployment Script (Requires sudo)

```bash
cd /home/diablorain/Syn_OS
sudo ./scripts/deploy-synos-v1.0-nosudo.sh
```

**This single script will:**
- âœ… Deploy 10 Rust enterprise binaries to ISO
- âœ… Deploy custom SynOS kernel
- âœ… Install nats-py for AI daemon
- âœ… Update GRUB branding (hostname=synos)
- âœ… Deploy Plymouth boot splash
- âœ… Create systemd services
- âœ… Set up desktop customizations
- âœ… Verify all deployments

**Expected output:** Complete deployment in ~2-3 minutes

---

## ðŸ“‹ Manual Deployment (If Script Fails)

### Phase 1: Deploy Binaries

```bash
cd /home/diablorain/Syn_OS
CHROOT="build/synos-v1.0/work/chroot"

# Create directories
sudo mkdir -p "$CHROOT/usr/local/bin"

# Copy all binaries
for binary in synos-pkg synos-threat-intel synos-threat-hunting synos-compliance synos-zt-engine synos-analytics synos-deception synos-hsm-integration synos-vuln-research synos-vm-wargames; do
    if [ -f "target/debug/$binary" ]; then
        sudo cp "target/debug/$binary" "$CHROOT/usr/local/bin/"
        sudo chmod +x "$CHROOT/usr/local/bin/$binary"
        sudo strip "$CHROOT/usr/local/bin/$binary" 2>/dev/null || true
        echo "âœ“ Deployed $binary"
    fi
done
```

### Phase 2: Deploy Custom Kernel

```bash
# Deploy kernel
sudo mkdir -p "$CHROOT/boot/synos"
sudo cp target/x86_64-unknown-none/release/kernel "$CHROOT/boot/synos/synos-kernel-1.0"
sudo chmod 644 "$CHROOT/boot/synos/synos-kernel-1.0"

echo "âœ“ Kernel deployed"
```

### Phase 3: AI Dependencies

```bash
# Install nats-py
sudo chroot "$CHROOT" pip3 install nats-py --break-system-packages

# Verify
sudo chroot "$CHROOT" pip3 show nats-py
sudo chroot "$CHROOT" pip3 list | grep -E "torch|onnx|langchain|nats"
```

### Phase 4: GRUB Branding

```bash
# Backup and update GRUB
GRUB_CFG="$CHROOT/boot/grub/grub.cfg"
sudo cp "$GRUB_CFG" "$GRUB_CFG.backup"

# Update branding
sudo sed -i 's/hostname=parrot/hostname=synos/g' "$GRUB_CFG"
sudo sed -i 's/Parrot Security/SynOS v1.0/g' "$GRUB_CFG"

# Deploy GRUB theme
sudo mkdir -p "$CHROOT/boot/grub/themes/synos"
sudo cp assets/branding/grub/*.png "$CHROOT/boot/grub/themes/synos/"

# Add custom kernel entry
sudo sed -i '/^menuentry "Try \/ Install"/a \
\
menuentry "SynOS Custom Kernel v1.0" --class synos {\
    set gfxpayload=keep\
    echo "Loading SynOS Kernel v1.0..."\
    multiboot /boot/synos/synos-kernel-1.0\
}' "$GRUB_CFG"

echo "âœ“ GRUB updated"
```

### Phase 5: Plymouth Splash

```bash
# Create Plymouth theme
PLYMOUTH_DIR="$CHROOT/usr/share/plymouth/themes/synos-neural"
sudo mkdir -p "$PLYMOUTH_DIR"

# Copy logo
sudo cp assets/branding/logos/synos-logo-128.png "$PLYMOUTH_DIR/logo.png"

# Create theme config
sudo tee "$PLYMOUTH_DIR/synos-neural.plymouth" > /dev/null << 'EOF'
[Plymouth Theme]
Name=SynOS Neural
Description=SynOS v1.0 Neural Boot Theme
ModuleName=script

[script]
ImageDir=/usr/share/plymouth/themes/synos-neural
ScriptFile=/usr/share/plymouth/themes/synos-neural/synos-neural.script
EOF

# Create boot script
sudo tee "$PLYMOUTH_DIR/synos-neural.script" > /dev/null << 'EOF'
Window.SetBackgroundTopColor(0.00, 0.11, 0.22);
Window.SetBackgroundBottomColor(0.00, 0.40, 0.80);

message_sprite = Sprite();
message_sprite.SetPosition(Window.GetX() + Window.GetWidth() / 2 - 200, Window.GetY() + Window.GetHeight() - 100, 10000);

fun message_callback(text) {
    message_image = Image.Text(text, 1.0, 1.0, 1.0);
    message_sprite.SetImage(message_image);
}

Plymouth.SetMessageFunction(message_callback);

status = "normal";

fun refresh_callback() {
    if (status == "normal") {
        message_callback("SynOS v1.0 - Initializing Neural Darwinism AI...");
    }
}

Plymouth.SetRefreshFunction(refresh_callback);
EOF

echo "âœ“ Plymouth deployed"
```

### Phase 6: Desktop Theme

```bash
# Create directories
sudo mkdir -p "$CHROOT/usr/share/backgrounds/synos"
sudo mkdir -p "$CHROOT/usr/share/pixmaps"

# Copy logos
sudo cp assets/branding/logos/*.png "$CHROOT/usr/share/pixmaps/"

# Create wallpaper
sudo tee "$CHROOT/usr/share/backgrounds/synos/synos-neural.svg" > /dev/null << 'EOF'
<?xml version="1.0" encoding="UTF-8"?>
<svg width="1920" height="1080" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="bg" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#001122;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0066cc;stop-opacity:1" />
    </linearGradient>
  </defs>
  <rect width="1920" height="1080" fill="url(#bg)"/>
  <text x="960" y="540" text-anchor="middle" font-family="Arial" font-size="72" fill="#00ffff">SynOS v1.0</text>
  <text x="960" y="620" text-anchor="middle" font-family="Arial" font-size="36" fill="#ffffff">Neural Darwinism AI Framework</text>
</svg>
EOF

# Configure MATE defaults
sudo mkdir -p "$CHROOT/etc/dconf/db/local.d"
sudo tee "$CHROOT/etc/dconf/db/local.d/01-synos-defaults" > /dev/null << 'EOF'
[org/mate/desktop/background]
picture-filename='/usr/share/backgrounds/synos/synos-neural.svg'
color-shading-type='vertical-gradient'
primary-color='#001122'
secondary-color='#0066cc'

[org/mate/desktop/interface]
gtk-theme='Blackmate'
icon-theme='mate'
EOF

sudo chroot "$CHROOT" dconf update 2>/dev/null || true

echo "âœ“ Desktop theme deployed"
```

### Phase 7: Systemd Services

```bash
SERVICES_DIR="$CHROOT/etc/systemd/system"

# Threat Intel Service
sudo tee "$SERVICES_DIR/synos-threat-intel.service" > /dev/null << 'EOF'
[Unit]
Description=SynOS Threat Intelligence Feed Integration
After=network.target

[Service]
Type=simple
ExecStart=/usr/local/bin/synos-threat-intel daemon
Restart=on-failure
RestartSec=30

[Install]
WantedBy=multi-user.target
EOF

# Threat Hunting Service
sudo tee "$SERVICES_DIR/synos-threat-hunting.service" > /dev/null << 'EOF'
[Unit]
Description=SynOS Threat Hunting Platform
After=network.target

[Service]
Type=simple
ExecStart=/usr/local/bin/synos-threat-hunting daemon
Restart=on-failure
RestartSec=30

[Install]
WantedBy=multi-user.target
EOF

# Zero Trust Engine
sudo tee "$SERVICES_DIR/synos-zt-engine.service" > /dev/null << 'EOF'
[Unit]
Description=SynOS Zero Trust Engine
After=network.target

[Service]
Type=simple
ExecStart=/usr/local/bin/synos-zt-engine daemon
Restart=on-failure
RestartSec=30

[Install]
WantedBy=multi-user.target
EOF

echo "âœ“ Services created"
```

---

## ðŸ”¨ Step 2: Rebuild ISO

```bash
cd /home/diablorain/Syn_OS/linux-distribution/SynOS-Linux-Builder

# Clean previous build
sudo lb clean --purge

# Rebuild with all deployments
sudo lb build

# Move ISO to build directory
sudo mv live-image-amd64.hybrid.iso ../../build/synos-v1.0-final.iso
sudo chown diablorain:diablorain ../../build/synos-v1.0-final.iso

# Create checksums
cd ../../build
sha256sum synos-v1.0-final.iso > synos-v1.0-final.iso.sha256
md5sum synos-v1.0-final.iso > synos-v1.0-final.iso.md5

echo "âœ“ ISO built successfully!"
du -h synos-v1.0-final.iso
```

---

## âœ… Step 3: Verification

### Quick Test

```bash
# List deployed binaries
ls -lh build/synos-v1.0/work/chroot/usr/local/bin/synos-*

# Check kernel
ls -lh build/synos-v1.0/work/chroot/boot/synos/

# Verify GRUB
grep -A 5 "SynOS" build/synos-v1.0/work/chroot/boot/grub/grub.cfg

# Check AI packages
sudo chroot build/synos-v1.0/work/chroot pip3 list | grep -E "nats|torch|onnx|langchain"
```

### Full VM Test

```bash
# Test in QEMU
qemu-system-x86_64 \
    -cdrom build/synos-v1.0-final.iso \
    -m 4G \
    -enable-kvm \
    -boot d

# Or VirtualBox
VBoxManage createvm --name "SynOS-v1.0-Test" --register
VBoxManage modifyvm "SynOS-v1.0-Test" --memory 4096 --cpus 2
VBoxManage storagectl "SynOS-v1.0-Test" --name "IDE" --add ide
VBoxManage storageattach "SynOS-v1.0-Test" --storagectl "IDE" --port 0 --device 0 --type dvddrive --medium build/synos-v1.0-final.iso
VBoxManage startvm "SynOS-v1.0-Test"
```

---

## ðŸ“Š Deployment Checklist

### Pre-Deployment Verification

- [ ] Chroot directory exists (`build/synos-v1.0/work/chroot`)
- [ ] Rust binaries compiled (`target/debug/synos-*`)
- [ ] Custom kernel compiled (`target/x86_64-unknown-none/release/kernel`)
- [ ] Branding assets exist (`assets/branding/`)

### Deployment Execution

- [ ] Run deployment script OR manual steps
- [ ] Verify binaries copied (10 enterprise tools)
- [ ] Verify kernel deployed
- [ ] Verify GRUB updated (hostname=synos)
- [ ] Verify Plymouth theme created
- [ ] Verify desktop customizations applied
- [ ] Verify AI dependencies installed (nats-py)

### Post-Deployment

- [ ] Rebuild ISO with `lb build`
- [ ] Create checksums (SHA256, MD5)
- [ ] Test boot in VM
- [ ] Verify all features work:
  - [ ] Boot shows "SynOS v1.0" not "Parrot"
  - [ ] Plymouth splash displays
  - [ ] Desktop has SynOS theme
  - [ ] Enterprise binaries accessible
  - [ ] AI daemon starts
  - [ ] Custom kernel in GRUB menu

---

## ðŸŽ¯ Expected Results

### After Deployment

**ISO Contents:**
- âœ… 10 Rust enterprise binaries in `/usr/local/bin`
- âœ… Custom kernel in `/boot/synos/synos-kernel-1.0`
- âœ… GRUB branded with SynOS
- âœ… Plymouth boot splash theme
- âœ… Desktop wallpaper and theme
- âœ… AI framework with nats-py
- âœ… Systemd services ready

**Boot Experience:**
1. GRUB shows "SynOS v1.0" (not Parrot)
2. Plymouth displays "Initializing Neural Darwinism AI..."
3. Desktop loads with SynOS wallpaper
4. All enterprise tools available in PATH

**Testing:**
```bash
# Should all work:
synos-pkg --help
synos-threat-intel stats
synos-threat-hunting --help
synos-compliance --help
synos-zt-engine --help
python3 /opt/synos/ai/daemon.py
```

---

## ðŸš¨ Troubleshooting

### Issue: "Chroot not found"
**Solution:** Build ISO first
```bash
cd linux-distribution/SynOS-Linux-Builder
sudo lb build
```

### Issue: "Binaries not found"
**Solution:** Compile Rust binaries
```bash
cargo build --workspace
```

### Issue: "Permission denied"
**Solution:** Run commands with sudo
```bash
sudo ./scripts/deploy-synos-v1.0-nosudo.sh
```

### Issue: "GRUB still shows Parrot"
**Solution:** Verify sed commands ran
```bash
grep "hostname=synos" build/synos-v1.0/work/chroot/boot/grub/grub.cfg
```

### Issue: "Plymouth not showing"
**Solution:** Check theme installed
```bash
ls -la build/synos-v1.0/work/chroot/usr/share/plymouth/themes/synos-neural/
```

---

## ðŸ“… Timeline

**Deployment:** 5-10 minutes
**ISO Rebuild:** 20-40 minutes
**Testing:** 10-15 minutes
**Total:** ~1 hour to complete v1.0 deployment

---

## ðŸŽ‰ Success Criteria

**v1.0 is COMPLETE when:**

1. âœ… ISO boots with "SynOS v1.0" branding
2. âœ… All 10 enterprise binaries work
3. âœ… Custom kernel appears in GRUB menu
4. âœ… Plymouth splash shows SynOS theme
5. âœ… Desktop has SynOS wallpaper/theme
6. âœ… AI daemon starts successfully
7. âœ… No "Parrot" references visible
8. âœ… ISO size ~17GB with all features

**Then ship it! ðŸš€**

---

**Quick Command Summary:**
```bash
# 1. Deploy everything
sudo ./scripts/deploy-synos-v1.0-nosudo.sh

# 2. Rebuild ISO
cd linux-distribution/SynOS-Linux-Builder && sudo lb build

# 3. Test
qemu-system-x86_64 -cdrom ../../build/synos-v1.0-final.iso -m 4G

# 4. Ship! ðŸŽ‰
```
