# PulseAudio Configuration for SynOS ALFRED v1.1
# This file supplements the default PulseAudio configuration
# Copy to ~/.config/pulse/default.pa.d/alfred.pa (if directory exists)
# Or append to ~/.config/pulse/default.pa

### Echo Cancellation for Voice Recognition
### This module processes audio to remove echo and reduce noise
.ifexists module-echo-cancel.so
.nofail
load-module module-echo-cancel \
    use_master_format=1 \
    aec_method=webrtc \
    aec_args="analog_gain_control=0 digital_gain_control=1 noise_suppression=1 voice_detection=1" \
    source_name=alfred_source \
    sink_name=alfred_sink
.fail
.endif

### Daemon Configuration
### These settings optimize for low-latency voice processing
.ifexists daemon.conf
default-sample-format = s16le
default-sample-rate = 44100
alternate-sample-rate = 48000
default-sample-channels = 2
default-fragments = 4
default-fragment-size-msec = 10
resample-method = speex-float-5
realtime-scheduling = yes
realtime-priority = 9
.endif
